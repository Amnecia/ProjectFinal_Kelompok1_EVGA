{% include 'header.html' %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Serif+Display:ital,wght@0,100..900;1,100..900&family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Satisfy&family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <style>
        .container {
            margin-top: 70px; /* Adjust this value to lower the container */
        }
          #imagePreview img {
        width: 250px; /* adjust the width to your desired size */
        height: 250px; /* adjust the height to your desired size */
        object-fit: cover; 
        border-radius: 5px; 
    }
    </style>
    <title>Tambah Produk</title>
  </head>
  <body>
    <div class="container border border-danger shadow rounded p-3">
      <div class="row">
        <div id="imagePreview" style="width: 250px; height: 250px;  margin-top: 10px; margin-right:15px;"></div>
        <div class="col-9 mt-4">
          <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label">Product Name</label>
            <input type="text" class="form-control border border-dark" id="namaProduk"  placeholder="masukan nama produk"
            />
          </div>
          <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label"
              >Price</label
            >
            <input type="number" class="form-control border border-dark" id="hargaProduk" />
          </div>
          <div class="container px-0">
            <!-- Hidden input file, triggered by clicking the button -->
            <input type="file" id="imageInput1" style="display: none;" accept="image/*">
            <!-- Button to trigger file input -->
            <label for="imageInput1" class="btn btn-danger">First Image</label>
            <input type="file" id="imageInput2" style="display: none;" accept="image/*">
            <!-- Button to trigger file input -->
            <label for="imageInput2" class="btn btn-danger">Second Image</label>
            <input type="file" id="imageInput3" style="display: none;" accept="image/*">
            <!-- Button to trigger file input -->
            <label for="imageInput3" class="btn btn-danger">Third Image</label>
          </div>
        </div>
        <div class="mb-4 mx-2" style="width: 97%;">
          <label for="exampleFormControlTextarea1" class="form-label"
            >Description</label
          >
          <textarea
            class="form-control border border-dark"
            id="deskripsiProduk"
            rows="4"
          ></textarea>
        </div>
      </div>
      <div class="row justify-content-between">
        <div class="col-9"></div>
        <div class="col-auto">
          <button type="button" class="btn btn-outline-danger mx-2 px-4">Cancel</button>
          <button type="button" class="btn btn-danger px-4" onclick="AddProduct()">Save</button>
        </div>
      </div>
    </div>
    <script
      src="https://code.jquery.com/jquery-3.7.1.js"
      integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
      crossorigin="anonymous"
    ></script>
    <script>
    // Get the file input elements
    const imageInput1 = document.getElementById('imageInput1');
const imageInput2 = document.getElementById('imageInput2');
const imageInput3 = document.getElementById('imageInput3');

const imagePreview1 = document.getElementById('imagePreview');
const imagePreview2 = document.getElementById('imagePreview');
const imagePreview3 = document.getElementById('imagePreview');

imageInput1.addEventListener('change', (e) => {
  const file = imageInput1.files[0];
  const reader = new FileReader();

  reader.onload = (event) => {
    const imageData = event.target.result;
    const image = document.createElement('img');
    image.src = imageData;
    imagePreview1.innerHTML = '';
    imagePreview1.appendChild(image);
  };

  reader.readAsDataURL(file);
});

imageInput2.addEventListener('change', (e) => {
  const file = imageInput2.files[0];
  const reader = new FileReader();

  reader.onload = (event) => {
    const imageData = event.target.result;
    const image = document.createElement('img');
    image.src = imageData;
    imagePreview2.innerHTML = '';
    imagePreview2.appendChild(image);
  };

  reader.readAsDataURL(file);
});

imageInput3.addEventListener('change', (e) => {
  const file = imageInput3.files[0];
  const reader = new FileReader();

  reader.onload = (event) => {
    const imageData = event.target.result;
    const image = document.createElement('img');
    image.src = imageData;
    imagePreview3.innerHTML = '';
    imagePreview3.appendChild(image);
  };

  reader.readAsDataURL(file);
});
function AddProduct() {
  let nama = $('#namaProduk').val();
  let harga = $('#hargaProduk').val();
  let deskripsi = $('#deskripsiProduk').val();
  let image1 = $('#imageInput1')[0].files[0];
  let image2 = $('#imageInput2')[0].files[0];
  let image3 = $('#imageInput3')[0].files[0];

  let formData = new FormData();
  formData.append('nama', nama);
  formData.append('harga', harga);
  formData.append('deskripsi', deskripsi);
  formData.append('image1', image1);
  formData.append('image2', image2);
  formData.append('image3', image3);

  $.ajax({
    type: 'POST',
    url: '/addProduk',
    data: formData,
    processData: false,
    contentType: false,
    success: function(response) {
      alert("Produk Baru telah berhasil ditambahkan!")
      location.href = '/list';
    }
  });
}
    </script>
  
  </body>
</html>
